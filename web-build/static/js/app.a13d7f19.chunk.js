(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{256:function(e,t,n){"use strict";n.d(t,"a",(function(){return Y}));var a=n(0),i=(n(397),n(414)),r=n(415),c=n(19),o=n.n(c),s=n(3),l=n(5),u=n(107),d=n(37),h=n(87),j=n(229),b=n(99),p=(n(388),n(400),(0===b.a.apps.length?b.a.initializeApp({apiKey:"AIzaSyBS38LOwTz_rhp0xZyGF7WBhYNPh887KSU",authDomain:"chatapp-e9fa3.firebaseapp.com",projectId:"chatapp-e9fa3",storageBucket:"chatapp-e9fa3.appspot.com",messagingSenderId:"232549271290",appId:"1:232549271290:web:2e5beb4a29afe30f3beb43"}):b.a.app()).firestore()),f=b.a.auth(),g=n(1),x=function(e){var t=e.navigation,n=Object(a.useState)(""),i=o()(n,2),r=i[0],c=i[1],s=Object(a.useState)(""),b=o()(s,2),p=b[0],x=b[1];Object(a.useLayoutEffect)((function(){t.setOptions({title:"ChatApp"})})),Object(a.useEffect)((function(){return f.onAuthStateChanged((function(e){e&&t.replace("Home")}))}),[]);var O=function(){f.signInWithEmailAndPassword(r,p).catch((function(e){return alert(e)}))};return Object(g.jsxs)(u.a,{behavior:"padding",style:m.container,children:[Object(g.jsx)(h.a,{style:"light"}),Object(g.jsx)(j.a,{name:"chat",size:150,color:"#2C6BED"}),Object(g.jsxs)(l.a,{style:m.inputContainer,children:[Object(g.jsx)(d.c,{placeholder:"Email",autoFocus:!0,type:"email",value:r,onChangeText:function(e){return c(e)}}),Object(g.jsx)(d.c,{placeholder:"Password",secureTextEntry:!0,type:"password",value:p,onChangeText:function(e){return x(e)},onSubmitEditing:O})]}),Object(g.jsx)(d.b,{containerStyle:m.button,onPress:O,title:"Login"}),Object(g.jsx)(d.b,{onPress:function(){return t.navigate("Register")},containerStyle:m.button,type:"outline",title:"Register"})]})},m=s.a.create({inputContainer:{width:300},button:{width:180,maginTop:10,padding:5},container:{flex:1,padding:10,backgroundColor:"#fff",alignItems:"center",justifyContent:"center"}}),O=function(e){var t=e.navigation,n=Object(a.useState)(""),i=o()(n,2),r=i[0],c=i[1],s=Object(a.useState)(""),j=o()(s,2),b=j[0],p=j[1],x=Object(a.useState)(""),m=o()(x,2),O=m[0],C=m[1],v=Object(a.useState)(""),S=o()(v,2),w=S[0],E=S[1];Object(a.useLayoutEffect)((function(){t.setOptions({headerBackTitle:"Back to Login"})}),[t]);var T=function(){f.createUserWithEmailAndPassword(b,O).then((function(e){e.user.updateProfile({displayName:r,photoURL:w||"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png"})})).catch((function(e){return alert(e.message)}))};return Object(g.jsxs)(u.a,{behavior:"padding",style:y.container,children:[Object(g.jsx)(h.a,{style:"light"}),Object(g.jsx)(d.e,{h3:!0,style:{marginBottom:50},children:"Create a ChatApp Account"}),Object(g.jsxs)(l.a,{style:y.inputContainer,children:[Object(g.jsx)(d.c,{placeholder:"User Name",autoFocus:!0,type:"text",value:r,onChangeText:function(e){return c(e)}}),Object(g.jsx)(d.c,{placeholder:"Email",type:"email",value:b,onChangeText:function(e){return p(e)}}),Object(g.jsx)(d.c,{placeholder:"Password",secureTextEntry:!0,type:"password",value:O,onChangeText:function(e){return C(e)}}),Object(g.jsx)(d.c,{placeholder:"Profile Picture URL (optional)",type:"text",value:w,onChangeText:function(e){return E(e)},onSubmitEditing:T})]}),Object(g.jsx)(d.b,{containerStyle:y.button,raised:!0,onPress:T,title:"Register"})]})},y=s.a.create({button:{width:200,marginTop:10},container:{flex:1,alignItems:"center",justifyContent:"center",padding:10,backgroundColor:"white"},inputContainer:{width:300}}),C=n(27),v=n(106),S=n(59),w=n(32),E=(s.a.create({}),function(e){var t=e.id,n=e.chatName,a=e.enterChat;return Object(g.jsx)(d.d,{onPress:function(){return a(t,n)},bottomDivider:!0,children:Object(g.jsxs)(d.d.Content,{children:[Object(g.jsx)(d.d.Title,{style:{fontWeight:"800"},children:n}),Object(g.jsx)(d.d.Subtitle,{numberOfLines:1,ellipsizeMode:"tail"})]})},t)}),T=n(232),k=function(e){var t=e.navigation,n=Object(a.useState)([]),i=o()(n,2),r=i[0],c=i[1],s=function(){f.signOut().then((function(){t.replace("Login")}))};Object(a.useEffect)((function(){return p.collection("chats").onSnapshot((function(e){return c(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),Object(a.useLayoutEffect)((function(){t.setOptions({title:"",headerStyle:{backgroundColor:"#2C6BED"},headerTitleStyle:{color:"white"},headerTintColor:"white",headerBackVisible:!1,headerLeft:function(){var e,t;return Object(g.jsxs)(l.a,{style:{left:-2,bottom:3,flexDirection:"row",width:75,justifyContent:"space-between"},children:[Object(g.jsx)(d.a,{rounded:!0,source:{uri:null==f||null==(e=f.currentUser)?void 0:e.photoURL}}),Object(g.jsx)(C.a,{style:L.userName,children:null==f||null==(t=f.currentUser)?void 0:t.displayName})]})},headerRight:function(){return Object(g.jsxs)(l.a,{style:{left:5,bottom:3,flexDirection:"row",width:70,justifyContent:"space-between"},children:[Object(g.jsx)(w.a,{children:Object(g.jsx)(j.a,{onPress:function(){return t.navigate("AddChat")},name:"new-message",size:24,color:"#FFF"})}),Object(g.jsx)(w.a,{onPress:s,activeOpacity:.5,children:Object(g.jsx)(T.a,{name:"sign-out",size:27,color:"#FFF"})})]})}})}),[t]);var u=function(e,n){t.navigate("Chat",{id:e,chatName:n})};return Object(g.jsxs)(v.a,{children:[Object(g.jsx)(h.a,{style:"light"}),Object(g.jsx)(S.a,{style:L.container,children:r.map((function(e){var t=e.id,n=e.data.chatName;return Object(g.jsx)(E,{id:t,chatName:n,enterChat:u},t)}))})]})},L=s.a.create({container:{height:"100%"},userName:{color:"white",fontWeight:"600"}}),R=n(33),B=n.n(R),P=s.a.create({container:{}}),N=function(e){var t=e.navigation,n=Object(a.useState)(""),i=o()(n,2),r=i[0],c=i[1];Object(a.useLayoutEffect)((function(){t.setOptions({title:"Create Chat Room"})}),[t]);var s=function(){var e=B()((function*(){yield p.collection("chats").add({chatName:r}).then((function(){t.goBack()})).catch((function(e){return alert(e)}))}));return function(){return e.apply(this,arguments)}}();return Object(g.jsxs)(l.a,{style:P.container,children:[Object(g.jsx)(d.c,{placeholder:"Chat Room Name",value:r,onChangeText:function(e){return c(e)},onSubmitEditing:s,leftIcon:Object(g.jsx)(j.a,{name:"chat",size:24,color:"#2C6BED"})}),Object(g.jsx)(d.b,{onPress:s,title:"Create New Chat Room"})]})},U=n(14),z=n(89),I=n(241),A=n(222),F=n(105),D=n(86),W=n(248),V=n.n(W),H=n(249),J=n.n(H);V.a.extend(J.a);var K=s.a.create({container:{flex:1,backgroundColor:"white"},chatContainer:{flex:1},footer:{flexDirection:"row",alignItems:"center",padding:15,width:"100%"},textInput:{bottom:0,height:40,flex:1,marginRight:15,backgroundColor:"#ECECEC",padding:10,color:"black",borderRadius:30},receiver:{padding:10,backgroundColor:"#7BB32E",alignSelf:"flex-end",borderRadius:10,marginRight:55,marginBottom:20,maxWidth:"65%",position:"relative"},sender:{padding:10,backgroundColor:"#ECECEC",alignSelf:"flex-start",borderRadius:10,marginLeft:55,marginBottom:20,maxWidth:"65%",position:"relative"},senderText:{color:"black",fontWeight:"600"},receiverText:{color:"black",fontWeight:"600"}}),M=function(e){var t=e.navigation,n=e.route,i=Object(a.useState)(""),r=o()(i,2),c=r[0],s=r[1],j=Object(a.useState)([]),x=o()(j,2),m=x[0],O=x[1];Object(a.useLayoutEffect)((function(){t.setOptions({title:"Chat",headerBackTitleVisible:!1,headerTitleAlign:"left",headerTitle:function(){return Object(g.jsx)(l.a,{style:{flexDirection:"row",alignItems:"center"},children:Object(g.jsx)(C.a,{style:{color:"white",fontWeight:"800"},children:n.params.chatName})})},headerLeft:function(){return Object(g.jsx)(w.a,{style:{left:-4},onPress:t.goBack,children:Object(g.jsx)(I.a,{name:"arrowleft",size:24,color:"white"})})},headerRight:function(){return Object(g.jsx)(l.a,{style:{right:-4},children:Object(g.jsx)(w.a,{children:Object(g.jsx)(A.a,{name:"ellipsis-horizontal",size:24,color:"white"})})})}})}),[t,m]);var y=function(){z.a.dismiss(),p.collection("chats").doc(n.params.id).collection("messages").add({timestamp:b.a.firestore.FieldValue.serverTimestamp(),message:c,displayName:f.currentUser.displayName,email:f.currentUser.email,photoURL:f.currentUser.photoURL}),s("")};return Object(a.useLayoutEffect)((function(){return p.collection("chats").doc(n.params.id).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return O(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[n]),Object(g.jsxs)(v.a,{style:K.container,children:[Object(g.jsx)(h.a,{style:"light"}),Object(g.jsx)(u.a,{behavior:"ios"===U.a.OS?"padding":"height",style:K.chatContainer,keyboardVerticalOffset:90,children:Object(g.jsx)(D.a,{onPress:z.a.dismiss,children:Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(S.a,{contentContainerStyle:{paddingTop:15},children:m.map((function(e){var t=e.id,n=e.data;return n.email===f.currentUser.email?Object(g.jsxs)(l.a,{style:K.receiver,children:[Object(g.jsx)(d.a,{position:"absolute",containerStyle:{position:"absolute",right:-45},right:-45,source:{uri:n.photoURL},size:37}),Object(g.jsx)(C.a,{style:K.receiverText,children:n.message})]},t):Object(g.jsxs)(l.a,{style:K.sender,children:[Object(g.jsx)(d.a,{position:"absolute",containerStyle:{position:"absolute",left:-45},left:-45,source:{uri:n.photoURL},size:37}),Object(g.jsx)(C.a,{style:K.senderText,children:n.message})]},t)}))}),Object(g.jsxs)(l.a,{style:K.footer,children:[Object(g.jsx)(F.a,{value:c,onChangeText:function(e){return s(e)},onSubmitEditing:y,placeholder:"Messages",style:K.textInput}),Object(g.jsx)(w.a,{onPress:y,activeOpacity:.5,children:Object(g.jsx)(A.a,{name:"send",size:24,color:"#2B68E6"})})]})]})})})]})},_=Object(r.a)(),G={headerStyle:{backgroundColor:"#2C6BED"},headerTitleStyle:{color:"white"},headerTintColor:"white"};function Y(){return Object(g.jsx)(i.a,{children:Object(g.jsxs)(_.Navigator,{screenOptions:G,children:[Object(g.jsx)(_.Screen,{name:"Login",component:x}),Object(g.jsx)(_.Screen,{name:"Register",component:O}),Object(g.jsx)(_.Screen,{name:"Home",component:k}),Object(g.jsx)(_.Screen,{name:"AddChat",component:N}),Object(g.jsx)(_.Screen,{name:"Chat",component:M})]})})}},262:function(e,t,n){e.exports=n(398)}},[[262,1,2]]]);
//# sourceMappingURL=app.a13d7f19.chunk.js.map