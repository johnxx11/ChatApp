(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{253:function(e,t,n){"use strict";n.d(t,"a",(function(){return J}));var a=n(0),i=(n(397),n(414)),o=n(415),r=n(19),c=n.n(r),s=n(3),l=n(5),u=n(107),d=n(24),h=n(68),f=n(74),g=n(37),j=n(88),b=n(228),p=n(99),m=(n(386),n(400),(0===p.a.apps.length?p.a.initializeApp({apiKey:"AIzaSyBS38LOwTz_rhp0xZyGF7WBhYNPh887KSU",authDomain:"chatapp-e9fa3.firebaseapp.com",projectId:"chatapp-e9fa3",storageBucket:"chatapp-e9fa3.appspot.com",messagingSenderId:"232549271290",appId:"1:232549271290:web:2e5beb4a29afe30f3beb43"}):p.a.app()).firestore()),x=p.a.auth(),y=n(1),O=function(e){var t=e.navigation,n=Object(a.useState)(""),i=c()(n,2),o=i[0],r=i[1],s=Object(a.useState)(""),p=c()(s,2),m=p[0],O=p[1];Object(a.useLayoutEffect)((function(){t.setOptions({title:"ChatApp",headerStyle:{backgroundColor:"#191970"},headerTitle:function(){return Object(y.jsx)(l.a,{style:{flexDirection:"row",alignItems:"center"},children:Object(y.jsx)(d.a,{style:{color:"white",fontWeight:"800",fontSize:18},children:"C H A T A P P"})})}})})),Object(a.useEffect)((function(){return x.onAuthStateChanged((function(e){e&&t.replace("Home")}))}),[]);var v=function(){x.signInWithEmailAndPassword(o,m).catch((function(e){return alert(e)}))};return Object(y.jsx)(f.a,{style:{flex:1},onPress:h.a.dismiss,children:Object(y.jsxs)(u.a,{behavior:"padding",style:S.container,children:[Object(y.jsx)(j.a,{style:"light"}),Object(y.jsx)(b.a,{name:"chat",size:120,color:"#191970"}),Object(y.jsxs)(l.a,{style:S.inputContainer,children:[Object(y.jsx)(g.c,{style:S.textInput,placeholder:"Email",type:"email",value:o,onChangeText:function(e){return r(e)}}),Object(y.jsx)(g.c,{style:S.textInput,placeholder:"Password",secureTextEntry:!0,type:"password",value:m,onChangeText:function(e){return O(e)},onSubmitEditing:v})]}),Object(y.jsx)(g.b,{containerStyle:S.button,onPress:v,title:"Login"}),Object(y.jsx)(g.b,{onPress:function(){return t.navigate("Register")},containerStyle:S.button,type:"outline",title:"Register"})]})})},S=s.a.create({inputContainer:{width:300},button:{width:160,maginTop:10,padding:5},container:{flex:1,padding:20,backgroundColor:"white",alignItems:"center",justifyContent:"center"},textInput:{flex:1,backgroundColor:"#fff",color:"dimgrey",borderRadius:5,fontSize:16,fontWeight:"700",padding:1,paddingTop:10}}),v=n(29),C=n(240),w=function(e){var t=e.navigation,n=Object(a.useState)(""),i=c()(n,2),o=i[0],r=i[1],s=Object(a.useState)(""),b=c()(s,2),p=b[0],m=b[1],O=Object(a.useState)(""),S=c()(O,2),w=S[0],T=S[1],k=Object(a.useState)(""),D=c()(k,2),E=D[0],I=D[1];Object(a.useLayoutEffect)((function(){t.setOptions({headerBackTitle:"",headerStyle:{backgroundColor:"#191970"},headerLeft:function(){return Object(y.jsx)(v.a,{style:{left:-4},onPress:t.goBack,children:Object(y.jsx)(C.a,{name:"caretleft",size:24,color:"white"})})},headerTitle:function(){return Object(y.jsx)(l.a,{style:{flexDirection:"row",alignItems:"center"},children:Object(y.jsx)(d.a,{style:{color:"white",fontWeight:"800",fontSize:18},children:"Register"})})}})}),[t]);var L=function(){x.createUserWithEmailAndPassword(p,w).then((function(e){e.user.updateProfile({displayName:o,photoURL:E||"https://res.cloudinary.com/crunchbase-production/image/upload/c_lpad,f_auto,q_auto:eco,dpr_1/nesuuhyyzmjip7zg0kg4"})})).catch((function(e){return alert(e.message)}))};return Object(y.jsx)(f.a,{style:{flex:1},onPress:h.a.dismiss,children:Object(y.jsxs)(u.a,{behavior:"padding",style:z.container,children:[Object(y.jsx)(j.a,{style:"light"}),Object(y.jsx)(v.a,{activeOpacity:.5,children:Object(y.jsx)(g.a,{rounded:!0,size:130,source:{uri:"https://res.cloudinary.com/crunchbase-production/image/upload/c_lpad,f_auto,q_auto:eco,dpr_1/nesuuhyyzmjip7zg0kg4"},containerStyle:{marginBottom:30,alignSelf:"center"},avatarStyle:{}})}),Object(y.jsxs)(l.a,{style:z.inputContainer,children:[Object(y.jsx)(g.c,{placeholder:"User Name",style:z.textInput,type:"text",value:o,onChangeText:function(e){return r(e)}}),Object(y.jsx)(g.c,{style:z.textInput,placeholder:"Email",type:"email",value:p,onChangeText:function(e){return m(e)}}),Object(y.jsx)(g.c,{style:z.textInput,placeholder:"Password",secureTextEntry:!0,type:"password",value:w,onChangeText:function(e){return T(e)}}),Object(y.jsx)(g.c,{style:z.textInput,placeholder:"Profile Picture URL (optional)",type:"text",value:E,onChangeText:function(e){return I(e)},onSubmitEditing:L})]}),Object(y.jsx)(g.b,{containerStyle:z.button,raised:!0,onPress:L,title:"Continue"})]})})},z=s.a.create({button:{width:160,marginBottom:80},container:{flex:1,alignItems:"center",justifyContent:"center",backgroundColor:"white"},inputContainer:{width:280},textInput:{flex:1,backgroundColor:"#fff",color:"dimgrey",borderRadius:5,fontSize:16,fontWeight:"700",padding:1,paddingTop:10}}),T=n(106),k=n(59),D=new Date;Date.prototype.getFullMinutes=function(){return this.getDate()<D.getDate()||this.getDate()>=D.getDate()&&this.getMonth()<D.getMonth()||this.getDate()>=D.getDate()&&this.getMonth()>=D.getMonth()&&this.getFullYear()<D.getFullYear()?this.getMonth()+1+"/"+this.getDate():this.getMinutes()<10?this.getHours()+":0"+this.getMinutes():this.getHours()+":"+this.getMinutes()};var E=s.a.create({chatName:{fontWeight:"800",flexDirection:"row",color:"#191970",fontSize:16,alignSelf:"flex-start",right:8,bottom:3},lastMessage:{color:"grey",fontWeight:"600",flexDirection:"row",alignSelf:"flex-start",right:8,fontSize:"15"},time:{alignSelf:"flex-end",color:"grey",fontWeight:"600",fontSize:"15",alignSelf:"flex-end"}}),I=function(e){var t,n,i,o,r=e.id,s=e.chatName,l=e.enterChat,u=Object(a.useState)([]),h=c()(u,2),f=h[0],j=h[1];return Object(a.useEffect)((function(){return m.collection("chats").doc(r).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return j(e.docs.map((function(e){return e.data()})))}))})),Object(y.jsxs)(g.d,{onPress:function(){return l(r,s)},bottomDivider:!0,style:E.container,children:[Object(y.jsx)(g.a,{size:40,source:{uri:(null==f||null==(t=f[0])?void 0:t.photoURL)||"https://res.cloudinary.com/crunchbase-production/image/upload/c_lpad,f_auto,q_auto:eco,dpr_1/nesuuhyyzmjip7zg0kg4"},avatarStyle:{borderRadius:5}}),Object(y.jsxs)(g.d.Content,{children:[Object(y.jsx)(g.d.Title,{style:E.chatName,numberOfLines:1,ellipsizeMode:"tail",children:s}),Object(y.jsx)(g.d.Subtitle,{style:E.lastMessage,numberOfLines:1,ellipsizeMode:"tail",children:f[0]?f[0].displayName+": "+f[0].message:""})]}),Object(y.jsx)(d.a,{style:E.time,children:null==f||null==(n=f[0])||null==(i=n.timestamp)||null==(o=i.toDate())?void 0:o.getFullMinutes()})]},r)},L=n(231),R=function(e){var t=e.navigation,n=Object(a.useState)([]),i=c()(n,2),o=i[0],r=i[1],s=function(){x.signOut().then((function(){t.replace("Login")}))};Object(a.useEffect)((function(){return m.collection("chats").onSnapshot((function(e){return r(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),Object(a.useLayoutEffect)((function(){t.setOptions({title:"",headerStyle:{backgroundColor:"#191970"},headerTitleStyle:{color:"white"},headerTintColor:"white",headerBackVisible:!1,headerLeft:function(){var e,t;return Object(y.jsxs)(l.a,{style:{right:3,bottom:3,flexDirection:"row",width:75,justifyContent:"space-between"},children:[Object(y.jsx)(v.a,{activeOpacity:.5,children:Object(y.jsx)(g.a,{rounded:!0,size:35,source:{uri:null==x||null==(e=x.currentUser)?void 0:e.photoURL},avatarStyle:{borderWidth:2,borderColor:"#fff"}})}),Object(y.jsx)(d.a,{style:M.userName,children:null==x||null==(t=x.currentUser)?void 0:t.displayName})]})},headerRight:function(){return Object(y.jsxs)(l.a,{style:{left:3,bottom:3,flexDirection:"row",width:70,justifyContent:"space-between"},children:[Object(y.jsx)(v.a,{activeOpacity:.5,children:Object(y.jsx)(b.a,{onPress:function(){return t.navigate("AddChat")},name:"new-message",size:24,color:"#FFF"})}),Object(y.jsx)(v.a,{onPress:s,activeOpacity:.5,children:Object(y.jsx)(L.a,{name:"sign-out",size:27,color:"#FFF"})})]})}})}),[t]);var u=function(e,n){t.navigate("Chat",{id:e,chatName:n})};return Object(y.jsxs)(T.a,{children:[Object(y.jsx)(j.a,{style:"light"}),Object(y.jsx)(k.a,{style:M.container,children:o.map((function(e){var t=e.id,n=e.data.chatName;return Object(y.jsx)(I,{id:t,chatName:n,enterChat:u},t)}))})]})},M=s.a.create({container:{height:"100%"},userName:{flexDirection:"row",color:"white",fontWeight:"600",fontSize:20,alignSelf:"center",marginStart:10,justifyContent:"center"}}),N=n(33),P=n.n(N),W=s.a.create({container:{width:"99%",alignSelf:"center"}}),B=function(e){var t=e.navigation,n=Object(a.useState)(""),i=c()(n,2),o=i[0],r=i[1];Object(a.useLayoutEffect)((function(){t.setOptions({title:"New Chat Rooms",headerStyle:{backgroundColor:"#191970"},headerLeft:function(){return Object(y.jsx)(v.a,{style:{left:-4},onPress:t.goBack,children:Object(y.jsx)(C.a,{name:"caretleft",size:24,color:"white"})})}})}),[t]);var s=function(){var e=P()((function*(){yield m.collection("chats").add({chatName:o}).then((function(){t.goBack()})).catch((function(e){return alert(e)}))}));return function(){return e.apply(this,arguments)}}();return Object(y.jsxs)(l.a,{style:W.container,children:[Object(y.jsx)(g.c,{placeholder:"Chat Room Name",value:o,onChangeText:function(e){return r(e)},onSubmitEditing:s,leftIcon:Object(y.jsx)(b.a,{name:"chat",size:30,color:"grey"})}),Object(y.jsx)(g.b,{onPress:s,title:"Create",disabled:!o||""===o.trim()})]})},F=n(14),U=n(221),_=n(105),A=new Date;Date.prototype.getFullMinutes=function(){return this.getDate()<A.getDate()||this.getDate()>=A.getDate()&&this.getMonth()<A.getMonth()||this.getDate()>=A.getDate()&&this.getMonth()>=A.getMonth()&&this.getFullYear()<A.getFullYear()?this.getMonth()+1+"/"+this.getDate():this.getMinutes()<10?this.getHours()+":0"+this.getMinutes():this.getHours()+":"+this.getMinutes()};var H=s.a.create({container:{flex:1,backgroundColor:"white"},chatContainer:{flex:1},footer:{flexDirection:"row",alignItems:"center",padding:15,width:"99%"},textInput:{bottom:0,height:40,flex:1,marginRight:15,backgroundColor:"#ECECEC",padding:10,color:"black",borderRadius:15,fontSize:15,fontWeight:"600"},receiver:{padding:5,backgroundColor:"#7bb32e",alignSelf:"flex-end",borderRadius:5,marginRight:60,marginBottom:16,maxWidth:"65%",position:"relative"},sender:{padding:5,backgroundColor:"#ECECEC",alignSelf:"flex-start",borderRadius:5,marginLeft:60,marginBottom:20,maxWidth:"65%",position:"relative"},senderText:{color:"black",fontWeight:"600",bottom:8,marginBottom:-3,fontSize:13},senderName:{fontWeight:"800",fontSize:"14",bottom:9,color:"#191970"},receiverText:{color:"black",fontWeight:"600",bottom:8,marginBottom:-3,fontSize:13},senderTime:{color:"#696969",fontWeight:"600",fontSize:"10",alignSelf:"flex-end",bottom:-1},receiverTime:{color:"#696969",fontWeight:"600",fontSize:"10",alignSelf:"flex-end",bottom:-3},chatIcon:{alignSelf:"flex-end",left:10,bottom:-10,color:"#7bb32e"},chatIcon2:{alignSelf:"flex-start",right:10,bottom:-12,color:"#ECECEC"}}),Y=function(e){var t=e.navigation,n=e.route,i=Object(a.useState)(""),o=c()(i,2),r=o[0],s=o[1],f=Object(a.useState)([]),b=c()(f,2),O=b[0],S=b[1];Object(a.useLayoutEffect)((function(){t.setOptions({title:"Chat",headerBackTitleVisible:!1,headerStyle:{backgroundColor:"#191970"},headerTitleAlign:"left",headerTitle:function(){return Object(y.jsx)(l.a,{style:{flexDirection:"row",alignItems:"center"},children:Object(y.jsx)(d.a,{style:{color:"white",fontWeight:"800",fontSize:18},children:n.params.chatName})})},headerLeft:function(){return Object(y.jsx)(v.a,{style:{left:-3},onPress:t.goBack,children:Object(y.jsx)(C.a,{name:"caretleft",size:24,color:"white"})})},headerRight:function(){return Object(y.jsx)(l.a,{style:{right:-3},children:Object(y.jsx)(v.a,{children:Object(y.jsx)(U.a,{name:"ellipsis-horizontal",size:24,color:"white"})})})}})}),[t,O]);var w=function(){h.a.dismiss(),m.collection("chats").doc(n.params.id).collection("messages").add({timestamp:p.a.firestore.FieldValue.serverTimestamp(),message:r,displayName:x.currentUser.displayName,email:x.currentUser.email,photoURL:x.currentUser.photoURL}),s("")};return Object(a.useLayoutEffect)((function(){return m.collection("chats").doc(n.params.id).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return S(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[n]),Object(y.jsxs)(T.a,{style:H.container,children:[Object(y.jsx)(j.a,{style:"light"}),Object(y.jsxs)(u.a,{behavior:"ios"===F.a.OS?"padding":"height",style:H.chatContainer,keyboardVerticalOffset:85,children:[Object(y.jsx)(k.a,{contentContainerStyle:{paddingTop:25},children:O.map((function(e){var t=e.id,n=e.data;return n.email===x.currentUser.email?Object(y.jsxs)(l.a,{style:H.receiver,children:[Object(y.jsx)(g.a,{position:"absolute",containerStyle:{position:"absolute",right:-50},right:-50,source:{uri:n.photoURL},size:42,avatarStyle:{borderRadius:5}}),Object(y.jsx)(C.a,{style:H.chatIcon,name:"caretright",size:8}),Object(y.jsx)(d.a,{style:H.receiverText,children:n.message}),Object(y.jsx)(d.a,{style:H.receiverTime,children:n.timestamp?n.timestamp.toDate().getFullMinutes():""})]},t):Object(y.jsxs)(l.a,{style:H.sender,children:[Object(y.jsx)(g.a,{position:"absolute",containerStyle:{position:"absolute",left:-50},left:-50,source:{uri:n.photoURL},size:42,avatarStyle:{borderRadius:5}}),Object(y.jsx)(C.a,{style:H.chatIcon2,name:"caretleft",size:8,color:"black"}),Object(y.jsx)(d.a,{style:H.senderName,children:n.displayName}),Object(y.jsx)(d.a,{style:H.senderText,children:n.message}),Object(y.jsx)(d.a,{style:H.senderTime,children:n.timestamp?n.timestamp.toDate().getFullMinutes():""})]},t)}))}),Object(y.jsxs)(l.a,{style:H.footer,children:[Object(y.jsx)(_.a,{value:r,onChangeText:function(e){return s(e)},onSubmitEditing:w,placeholder:"Let's chat!",style:H.textInput}),Object(y.jsx)(v.a,{onPress:w,activeOpacity:.5,disabled:!r||""===r.trim(),children:Object(y.jsx)(U.a,{name:"send",size:24,color:r&&""!==r.trim()?"#191970":"grey"})})]})]})]})},V=Object(o.a)(),q={headerStyle:{backgroundColor:"#191970"},headerTitleStyle:{color:"white"},headerTintColor:"white"};function J(){return Object(y.jsx)(i.a,{children:Object(y.jsxs)(V.Navigator,{screenOptions:q,children:[Object(y.jsx)(V.Screen,{name:"Login",component:O}),Object(y.jsx)(V.Screen,{name:"Register",component:w}),Object(y.jsx)(V.Screen,{name:"Home",component:R}),Object(y.jsx)(V.Screen,{name:"AddChat",component:B}),Object(y.jsx)(V.Screen,{name:"Chat",component:Y})]})})}},259:function(e,t,n){e.exports=n(398)}},[[259,1,2]]]);
//# sourceMappingURL=app.6387a43b.chunk.js.map