{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { Avatar, ListItem } from 'react-native-elements';\nimport { db } from \"../../firebase\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar CustomListItem = function CustomListItem(_ref) {\n  var _chatMessages$, _chatMessages$2, _chatMessages$3;\n  var id = _ref.id,\n    chatName = _ref.chatName,\n    enterChat = _ref.enterChat;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    chatMessages = _useState2[0],\n    setChatMessages = _useState2[1];\n  useEffect(function () {\n    var unsubscribe = db.collection('chats').doc(id).collection('messages').orderBy('timestamp', 'desc').onSnapshot(function (snapshot) {\n      return setChatMessages(snapshot.docs.map(function (doc) {\n        return doc.data();\n      }));\n    });\n    return unsubscribe;\n  });\n  return _jsxs(ListItem, {\n    onPress: function onPress() {\n      return enterChat(id, chatName);\n    },\n    bottomDivider: true,\n    style: styles.container,\n    children: [_jsx(Avatar, {\n      size: 40,\n      source: {\n        uri: (chatMessages == null ? void 0 : (_chatMessages$ = chatMessages[0]) == null ? void 0 : _chatMessages$.photoURL) || \"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png\"\n      },\n      avatarStyle: {\n        borderRadius: 5\n      }\n    }), _jsxs(ListItem.Content, {\n      children: [_jsx(ListItem.Title, {\n        style: styles.chatName,\n        numberOfLines: 1,\n        ellipsizeMode: \"tail\",\n        children: chatName\n      }), _jsxs(ListItem.Subtitle, {\n        style: styles.lastMessage,\n        numberOfLines: 1,\n        ellipsizeMode: \"tail\",\n        children: [chatMessages == null ? void 0 : (_chatMessages$2 = chatMessages[0]) == null ? void 0 : _chatMessages$2.displayName, \": \", chatMessages == null ? void 0 : (_chatMessages$3 = chatMessages[0]) == null ? void 0 : _chatMessages$3.message]\n      })]\n    })]\n  }, id);\n};\nvar styles = StyleSheet.create({\n  chatName: {\n    fontWeight: \"600\",\n    flexDirection: \"row\",\n    color: \"black\",\n    fontSize: 18,\n    alignSelf: \"flex-start\",\n    right: 8,\n    bottom: 3\n  },\n  lastMessage: {\n    color: \"grey\",\n    fontWeight: \"600\",\n    flexDirection: \"row\",\n    alignSelf: \"flex-start\",\n    right: 8\n  }\n});\nexport default CustomListItem;","map":{"version":3,"names":["React","useEffect","useState","Avatar","ListItem","db","CustomListItem","id","chatName","enterChat","chatMessages","setChatMessages","unsubscribe","collection","doc","orderBy","onSnapshot","snapshot","docs","map","data","styles","container","uri","photoURL","borderRadius","lastMessage","displayName","message","StyleSheet","create","fontWeight","flexDirection","color","fontSize","alignSelf","right","bottom"],"sources":["/Users/johnwu/ChatApp/ChatApp/ChatApp/screens/components/CustomListItem.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { View, Text, StyleSheet } from 'react-native';\nimport { Avatar, ListItem } from 'react-native-elements';\nimport { db } from '../../firebase';\n\n\n\nconst CustomListItem = ({ id, chatName, enterChat }) => {\n    const [chatMessages, setChatMessages] = useState([]);\n\n    useEffect(() => {\n        const unsubscribe = db\n            .collection('chats')\n            .doc(id)\n            .collection('messages')\n            .orderBy('timestamp', 'desc')\n            .onSnapshot((snapshot) =>\n                setChatMessages(snapshot.docs.map((doc) => doc.data()))\n            );\n        return unsubscribe;\n    });\n\n    return (\n        <ListItem onPress={() => enterChat(id, chatName)} key={id} bottomDivider style={styles.container}>\n            <Avatar\n                size={40}\n                source={{uri: chatMessages?.[0]?.photoURL || \n                \"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png\"}}\n                avatarStyle={{borderRadius: 5 }}\n            />\n            <ListItem.Content>\n                <ListItem.Title style={styles.chatName} numberOfLines={1} ellipsizeMode=\"tail\">\n                    {chatName}\n                </ListItem.Title>\n                <ListItem.Subtitle style={styles.lastMessage} numberOfLines={1} ellipsizeMode=\"tail\">   \n                    {chatMessages?.[0]?.displayName}: {chatMessages?.[0]?.message}         \n                </ListItem.Subtitle>\n            </ListItem.Content>\n        </ListItem>\n    );\n};\n\nconst styles = StyleSheet.create({\n    chatName: {\n        fontWeight: \"600\",\n        flexDirection: \"row\",\n        color: \"black\",\n        fontSize: 18,\n        alignSelf: \"flex-start\",\n        right: 8,\n        bottom: 3,\n    },\n    lastMessage: {\n        color: \"grey\",\n        fontWeight: \"600\",\n        flexDirection: \"row\",\n        alignSelf: \"flex-start\",\n        right: 8,\n        \n    }\n});\n\nexport default CustomListItem;\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAAC;AAAA;AAAA;AAEnD,SAASC,MAAM,EAAEC,QAAQ,QAAQ,uBAAuB;AACxD,SAASC,EAAE;AAAyB;AAAA;AAIpC,IAAMC,cAAc,GAAG,SAAjBA,cAAc,OAAoC;EAAA;EAAA,IAA9BC,EAAE,QAAFA,EAAE;IAAEC,QAAQ,QAARA,QAAQ;IAAEC,SAAS,QAATA,SAAS;EAC7C,gBAAwCP,QAAQ,CAAC,EAAE,CAAC;IAAA;IAA7CQ,YAAY;IAAEC,eAAe;EAEpCV,SAAS,CAAC,YAAM;IACZ,IAAMW,WAAW,GAAGP,EAAE,CACjBQ,UAAU,CAAC,OAAO,CAAC,CACnBC,GAAG,CAACP,EAAE,CAAC,CACPM,UAAU,CAAC,UAAU,CAAC,CACtBE,OAAO,CAAC,WAAW,EAAE,MAAM,CAAC,CAC5BC,UAAU,CAAC,UAACC,QAAQ;MAAA,OACjBN,eAAe,CAACM,QAAQ,CAACC,IAAI,CAACC,GAAG,CAAC,UAACL,GAAG;QAAA,OAAKA,GAAG,CAACM,IAAI,EAAE;MAAA,EAAC,CAAC;IAAA,EAC1D;IACL,OAAOR,WAAW;EACtB,CAAC,CAAC;EAEF,OACI,MAAC,QAAQ;IAAC,OAAO,EAAE;MAAA,OAAMH,SAAS,CAACF,EAAE,EAAEC,QAAQ,CAAC;IAAA,CAAC;IAAU,aAAa;IAAC,KAAK,EAAEa,MAAM,CAACC,SAAU;IAAA,WAC7F,KAAC,MAAM;MACH,IAAI,EAAE,EAAG;MACT,MAAM,EAAE;QAACC,GAAG,EAAE,CAAAb,YAAY,sCAAZA,YAAY,CAAG,CAAC,CAAC,qBAAjB,eAAmBc,QAAQ,KACzC;MAAsF,CAAE;MACxF,WAAW,EAAE;QAACC,YAAY,EAAE;MAAE;IAAE,EAClC,EACF,MAAC,QAAQ,CAAC,OAAO;MAAA,WACb,KAAC,QAAQ,CAAC,KAAK;QAAC,KAAK,EAAEJ,MAAM,CAACb,QAAS;QAAC,aAAa,EAAE,CAAE;QAAC,aAAa,EAAC,MAAM;QAAA,UACzEA;MAAQ,EACI,EACjB,MAAC,QAAQ,CAAC,QAAQ;QAAC,KAAK,EAAEa,MAAM,CAACK,WAAY;QAAC,aAAa,EAAE,CAAE;QAAC,aAAa,EAAC,MAAM;QAAA,WAC/EhB,YAAY,uCAAZA,YAAY,CAAG,CAAC,CAAC,qBAAjB,gBAAmBiB,WAAW,EAAC,IAAE,EAACjB,YAAY,uCAAZA,YAAY,CAAG,CAAC,CAAC,qBAAjB,gBAAmBkB,OAAO;MAAA,EAC7C;IAAA,EACL;EAAA,GAdgCrB,EAAE,CAe9C;AAEnB,CAAC;AAED,IAAMc,MAAM,GAAGQ,UAAU,CAACC,MAAM,CAAC;EAC7BtB,QAAQ,EAAE;IACNuB,UAAU,EAAE,KAAK;IACjBC,aAAa,EAAE,KAAK;IACpBC,KAAK,EAAE,OAAO;IACdC,QAAQ,EAAE,EAAE;IACZC,SAAS,EAAE,YAAY;IACvBC,KAAK,EAAE,CAAC;IACRC,MAAM,EAAE;EACZ,CAAC;EACDX,WAAW,EAAE;IACTO,KAAK,EAAE,MAAM;IACbF,UAAU,EAAE,KAAK;IACjBC,aAAa,EAAE,KAAK;IACpBG,SAAS,EAAE,YAAY;IACvBC,KAAK,EAAE;EAEX;AACJ,CAAC,CAAC;AAEF,eAAe9B,cAAc"},"metadata":{},"sourceType":"module"}