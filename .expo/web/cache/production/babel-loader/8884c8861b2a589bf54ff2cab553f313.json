{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useEffect,useLayoutEffect,useState}from'react';import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import SafeAreaView from\"react-native-web/dist/exports/SafeAreaView\";import ScrollView from\"react-native-web/dist/exports/ScrollView\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import{StatusBar}from\"expo-status-bar\";import{Avatar}from'react-native-elements';import CustomListItem from\"./components/CustomListItem\";import{Entypo,FontAwesome}from\"@expo/vector-icons\";import{auth,db}from\"../firebase\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var HomeScreen=function HomeScreen(_ref){var navigation=_ref.navigation;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),chats=_useState2[0],setChats=_useState2[1];var signOutUser=function signOutUser(){auth.signOut().then(function(){navigation.replace(\"Login\");});};useEffect(function(){var unsubscribe=db.collection('chats').onSnapshot(function(snapshot){return setChats(snapshot.docs.map(function(doc){return{id:doc.id,data:doc.data()};}));});return unsubscribe;},[]);useLayoutEffect(function(){navigation.setOptions({title:\"\",headerStyle:{backgroundColor:\"#191970\"},headerTitleStyle:{color:\"white\"},headerTintColor:\"white\",headerBackVisible:false,headerLeft:function headerLeft(){var _auth$currentUser,_auth$currentUser2;return _jsxs(View,{style:{right:3,bottom:3,flexDirection:\"row\",width:75,justifyContent:\"space-between\"},children:[_jsx(TouchableOpacity,{activeOpacity:0.5,children:_jsx(Avatar,{rounded:true,size:35,source:{uri:auth==null?void 0:(_auth$currentUser=auth.currentUser)==null?void 0:_auth$currentUser.photoURL},avatarStyle:{borderWidth:2,borderColor:'#fff'}})}),_jsx(Text,{style:styles.userName,children:auth==null?void 0:(_auth$currentUser2=auth.currentUser)==null?void 0:_auth$currentUser2.displayName})]});},headerRight:function headerRight(){return _jsxs(View,{style:{left:3,bottom:3,flexDirection:\"row\",width:70,justifyContent:\"space-between\"},children:[_jsx(TouchableOpacity,{activeOpacity:0.5,children:_jsx(Entypo,{onPress:function onPress(){return navigation.navigate(\"AddChat\");},name:\"new-message\",size:24,color:\"#FFF\"})}),_jsx(TouchableOpacity,{onPress:signOutUser,activeOpacity:0.5,children:_jsx(FontAwesome,{name:\"sign-out\",size:27,color:\"#FFF\"})})]});}});},[navigation]);var enterChat=function enterChat(id,chatName){navigation.navigate('Chat',{id:id,chatName:chatName});};return _jsxs(SafeAreaView,{children:[_jsx(StatusBar,{style:\"light\"}),_jsx(ScrollView,{style:styles.container,children:chats.map(function(_ref2){var id=_ref2.id,chatName=_ref2.data.chatName;return _jsx(CustomListItem,{id:id,chatName:chatName,enterChat:enterChat},id);})})]});};export default HomeScreen;var styles=StyleSheet.create({container:{height:'100%'},userName:{flexDirection:\"row\",color:\"white\",fontWeight:\"600\",fontSize:20,alignSelf:\"center\",marginStart:10,justifyContent:\"center\"}});","map":{"version":3,"names":["React","useEffect","useLayoutEffect","useState","StatusBar","Avatar","CustomListItem","Entypo","FontAwesome","auth","db","HomeScreen","navigation","chats","setChats","signOutUser","signOut","then","replace","unsubscribe","collection","onSnapshot","snapshot","docs","map","doc","id","data","setOptions","title","headerStyle","backgroundColor","headerTitleStyle","color","headerTintColor","headerBackVisible","headerLeft","right","bottom","flexDirection","width","justifyContent","uri","currentUser","photoURL","borderWidth","borderColor","styles","userName","displayName","headerRight","left","navigate","enterChat","chatName","container","StyleSheet","create","height","fontWeight","fontSize","alignSelf","marginStart"],"sources":["/Users/johnwu/ChatApp/ChatApp/ChatApp/screens/HomeScreen.js"],"sourcesContent":["import React, { useEffect, useLayoutEffect, useState }from 'react';\nimport { StyleSheet, View, Text, SafeAreaView, ScrollView, TouchableOpacity } from 'react-native';\nimport { StatusBar } from \"expo-status-bar\";\nimport { Avatar } from 'react-native-elements';\nimport CustomListItem from './components/CustomListItem';\nimport { Entypo, FontAwesome } from \"@expo/vector-icons\";\nimport { auth, db } from \"../firebase\";\n\nconst HomeScreen = ({ navigation }) => {\n    const [chats, setChats] = useState([]);\n\n    const signOutUser = () => {\n        auth.signOut().then(() => {\n            navigation.replace(\"Login\")\n        });\n    };\n\n    useEffect(() => {\n        const unsubscribe = db.collection('chats').onSnapshot(snapshot => (\n            setChats(snapshot.docs.map(doc => ({\n                id: doc.id,\n                data: doc.data()\n            })))\n        ));\n        return unsubscribe;\n    }, []);\n\n    useLayoutEffect(() => {\n        navigation.setOptions({\n            title: \"\",\n            headerStyle: { backgroundColor: \"#191970\" },\n            headerTitleStyle: { color: \"white\" },\n            headerTintColor: \"white\",\n            headerBackVisible: false,\n            \n            headerLeft: () => (\n                <View style={{ \n                    right: 3, \n                    bottom: 3,                    \n                    flexDirection: \"row\",\n                    width: 75,\n                    justifyContent: \"space-between\", \n                }}>\n                    <TouchableOpacity activeOpacity={0.5}>\n                        <Avatar \n                            rounded \n                            size={35}\n                            source={{ uri: auth?.currentUser?.photoURL}}\n                            avatarStyle={{\n                                borderWidth: 2,\n                                borderColor: '#fff'}}\n                        />\n                    </TouchableOpacity>\n                    <Text style={styles.userName}>{auth?.currentUser?.displayName}</Text>\n                </View>\n            ),\n            headerRight: () => (\n                <View style={{\n                    left: 3,\n                    bottom: 3,   \n                    flexDirection: \"row\",\n                    width: 70,\n                    justifyContent: \"space-between\",\n                    \n                }}>\n                    <TouchableOpacity activeOpacity={0.5}>\n                        <Entypo onPress={() => navigation.navigate(\"AddChat\")} name=\"new-message\" size={24} color=\"#FFF\" />\n                    </TouchableOpacity>\n                    <TouchableOpacity onPress={signOutUser} activeOpacity={0.5}>\n                        <FontAwesome name=\"sign-out\" size={27} color=\"#FFF\"/>\n                    </TouchableOpacity>\n                </View>\n            ),\n        });\n    }, [navigation]);\n\n    const enterChat = (id, chatName) => {\n        navigation.navigate('Chat', {\n            id: id,\n            chatName: chatName,\n        });\n    };\n\n    return (\n      <SafeAreaView>\n        <StatusBar style=\"light\" />\n        <ScrollView style={styles.container} >\n            {chats.map(({id, data: { chatName }}) => (\n                <CustomListItem \n                    key={id} \n                    id={id} \n                    chatName={chatName} \n                    enterChat={enterChat}\n                />\n            ))}\n        </ScrollView>\n      </SafeAreaView>\n    );\n}\n\nexport default HomeScreen;\n\nconst styles = StyleSheet.create({\n    container: {\n        height: '100%',\n        \n    },\n    userName: {\n        flexDirection: \"row\",\n        color: \"white\",\n        fontWeight: \"600\",\n        fontSize: 20,\n        alignSelf: \"center\",\n        marginStart: 10,\n        justifyContent: \"center\"\n    }\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}