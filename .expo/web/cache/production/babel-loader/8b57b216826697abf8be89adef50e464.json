{"ast":null,"code":"import _defineProperty2 from\"@babel/runtime/helpers/defineProperty\";import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _assertThisInitialized from\"@babel/runtime/helpers/assertThisInitialized\";import _get from\"@babel/runtime/helpers/get\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";var _excluded=[\"enabled\"];function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty2(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}import PixelRatio from\"react-native-web/dist/exports/PixelRatio\";import{State}from\"../../State\";import{DEFAULT_TOUCH_SLOP}from\"../constants\";import GestureHandler from\"./GestureHandler\";var DEFAULT_MIN_POINTERS=1;var DEFAULT_MAX_POINTERS=10;var DEFAULT_MIN_DIST_SQ=DEFAULT_TOUCH_SLOP*DEFAULT_TOUCH_SLOP;var PanGestureHandler=function(_GestureHandler){_inherits(PanGestureHandler,_GestureHandler);var _super=_createSuper(PanGestureHandler);function PanGestureHandler(){var _this;_classCallCheck(this,PanGestureHandler);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_defineProperty(_assertThisInitialized(_this),\"customActivationProperties\",['activeOffsetXStart','activeOffsetXEnd','failOffsetXStart','failOffsetXEnd','activeOffsetYStart','activeOffsetYEnd','failOffsetYStart','failOffsetYEnd','minVelocityX','minVelocityY']);_defineProperty(_assertThisInitialized(_this),\"velocityX\",0);_defineProperty(_assertThisInitialized(_this),\"velocityY\",0);_defineProperty(_assertThisInitialized(_this),\"minDistSq\",DEFAULT_MIN_DIST_SQ);_defineProperty(_assertThisInitialized(_this),\"activeOffsetXStart\",-Number.MAX_SAFE_INTEGER);_defineProperty(_assertThisInitialized(_this),\"activeOffsetXEnd\",Number.MIN_SAFE_INTEGER);_defineProperty(_assertThisInitialized(_this),\"failOffsetXStart\",Number.MIN_SAFE_INTEGER);_defineProperty(_assertThisInitialized(_this),\"failOffsetXEnd\",Number.MAX_SAFE_INTEGER);_defineProperty(_assertThisInitialized(_this),\"activeOffsetYStart\",Number.MAX_SAFE_INTEGER);_defineProperty(_assertThisInitialized(_this),\"activeOffsetYEnd\",Number.MIN_SAFE_INTEGER);_defineProperty(_assertThisInitialized(_this),\"failOffsetYStart\",Number.MIN_SAFE_INTEGER);_defineProperty(_assertThisInitialized(_this),\"failOffsetYEnd\",Number.MAX_SAFE_INTEGER);_defineProperty(_assertThisInitialized(_this),\"minVelocityX\",Number.MAX_SAFE_INTEGER);_defineProperty(_assertThisInitialized(_this),\"minVelocityY\",Number.MAX_SAFE_INTEGER);_defineProperty(_assertThisInitialized(_this),\"minVelocitySq\",Number.MAX_SAFE_INTEGER);_defineProperty(_assertThisInitialized(_this),\"minPointers\",DEFAULT_MIN_POINTERS);_defineProperty(_assertThisInitialized(_this),\"maxPointers\",DEFAULT_MAX_POINTERS);_defineProperty(_assertThisInitialized(_this),\"startX\",0);_defineProperty(_assertThisInitialized(_this),\"startY\",0);_defineProperty(_assertThisInitialized(_this),\"offsetX\",0);_defineProperty(_assertThisInitialized(_this),\"offsetY\",0);_defineProperty(_assertThisInitialized(_this),\"lastX\",0);_defineProperty(_assertThisInitialized(_this),\"lastY\",0);_defineProperty(_assertThisInitialized(_this),\"activateAfterLongPress\",0);_defineProperty(_assertThisInitialized(_this),\"activationTimeout\",0);return _this;}_createClass(PanGestureHandler,[{key:\"init\",value:function init(ref,propsRef){_get(_getPrototypeOf(PanGestureHandler.prototype),\"init\",this).call(this,ref,propsRef);}},{key:\"updateGestureConfig\",value:function updateGestureConfig(_ref){var _ref$enabled=_ref.enabled,enabled=_ref$enabled===void 0?true:_ref$enabled,props=_objectWithoutProperties(_ref,_excluded);this.resetConfig();_get(_getPrototypeOf(PanGestureHandler.prototype),\"updateGestureConfig\",this).call(this,_objectSpread({enabled:enabled},props));this.checkCustomActivationCriteria(this.customActivationProperties);if(this.config.minDist!==undefined){this.minDistSq=this.config.minDist*this.config.minDist;}else if(this.hasCustomActivationCriteria){this.minDistSq=Number.MAX_SAFE_INTEGER;}if(this.config.minPointers!==undefined){this.minPointers=this.config.minPointers;}if(this.config.maxPointers!==undefined){this.maxPointers=this.config.maxPointers;}if(this.config.minVelocity!==undefined){this.minVelocityX=this.config.minVelocity;this.minVelocityY=this.config.minVelocity;}if(this.config.minVelocityX!==undefined){this.minVelocityX=this.config.minVelocityX;}if(this.config.minVelocityY!==undefined){this.minVelocityY=this.config.minVelocityY;}if(this.config.activateAfterLongPress!==undefined){this.activateAfterLongPress=this.config.activateAfterLongPress;}if(this.config.activeOffsetXStart!==undefined){this.activeOffsetXStart=this.config.activeOffsetXStart;if(this.config.activeOffsetXEnd===undefined){this.activeOffsetXEnd=Number.MAX_SAFE_INTEGER;}}if(this.config.activeOffsetXEnd!==undefined){this.activeOffsetXEnd=this.config.activeOffsetXEnd;if(this.config.activeOffsetXStart===undefined){this.activeOffsetXStart=Number.MIN_SAFE_INTEGER;}}if(this.config.failOffsetXStart!==undefined){this.failOffsetXStart=this.config.failOffsetXStart;if(this.config.failOffsetXEnd===undefined){this.failOffsetXEnd=Number.MAX_SAFE_INTEGER;}}if(this.config.failOffsetXEnd!==undefined){this.failOffsetXEnd=this.config.failOffsetXEnd;if(this.config.failOffsetXStart===undefined){this.failOffsetXStart=Number.MIN_SAFE_INTEGER;}}if(this.config.activeOffsetYStart!==undefined){this.activeOffsetYStart=this.config.activeOffsetYStart;if(this.config.activeOffsetYEnd===undefined){this.activeOffsetYEnd=Number.MAX_SAFE_INTEGER;}}if(this.config.activeOffsetYEnd!==undefined){this.activeOffsetYEnd=this.config.activeOffsetYEnd;if(this.config.activeOffsetYStart===undefined){this.activeOffsetYStart=Number.MIN_SAFE_INTEGER;}}if(this.config.failOffsetYStart!==undefined){this.failOffsetYStart=this.config.failOffsetYStart;if(this.config.failOffsetYEnd===undefined){this.failOffsetYEnd=Number.MAX_SAFE_INTEGER;}}if(this.config.failOffsetYEnd!==undefined){this.failOffsetYEnd=this.config.failOffsetYEnd;if(this.config.failOffsetYStart===undefined){this.failOffsetYStart=Number.MIN_SAFE_INTEGER;}}}},{key:\"resetConfig\",value:function resetConfig(){_get(_getPrototypeOf(PanGestureHandler.prototype),\"resetConfig\",this).call(this);this.activeOffsetXStart=-Number.MAX_SAFE_INTEGER;this.activeOffsetXEnd=Number.MIN_SAFE_INTEGER;this.failOffsetXStart=Number.MIN_SAFE_INTEGER;this.failOffsetXEnd=Number.MAX_SAFE_INTEGER;this.activeOffsetYStart=Number.MAX_SAFE_INTEGER;this.activeOffsetYEnd=Number.MIN_SAFE_INTEGER;this.failOffsetYStart=Number.MIN_SAFE_INTEGER;this.failOffsetYEnd=Number.MAX_SAFE_INTEGER;this.minVelocityX=Number.MAX_SAFE_INTEGER;this.minVelocityY=Number.MAX_SAFE_INTEGER;this.minVelocitySq=Number.MAX_SAFE_INTEGER;this.minDistSq=DEFAULT_MIN_DIST_SQ;this.minPointers=DEFAULT_MIN_POINTERS;this.maxPointers=DEFAULT_MAX_POINTERS;this.activateAfterLongPress=0;}},{key:\"transformNativeEvent\",value:function transformNativeEvent(){var rect=this.view.getBoundingClientRect();var ratio=PixelRatio.get();var translationX=this.getTranslationX();var translationY=this.getTranslationY();return{translationX:isNaN(translationX)?0:translationX,translationY:isNaN(translationY)?0:translationY,absoluteX:this.tracker.getLastAvgX(),absoluteY:this.tracker.getLastAvgY(),velocityX:this.velocityX*ratio*10,velocityY:this.velocityY*ratio*10,x:this.tracker.getLastAvgX()-rect.left,y:this.tracker.getLastAvgY()-rect.top};}},{key:\"getTranslationX\",value:function getTranslationX(){return this.lastX-this.startX+this.offsetX;}},{key:\"getTranslationY\",value:function getTranslationY(){return this.lastY-this.startY+this.offsetY;}},{key:\"clearActivationTimeout\",value:function clearActivationTimeout(){clearTimeout(this.activationTimeout);}},{key:\"onPointerDown\",value:function onPointerDown(event){this.tracker.addToTracker(event);_get(_getPrototypeOf(PanGestureHandler.prototype),\"onPointerDown\",this).call(this,event);this.lastX=this.tracker.getLastAvgX();this.lastY=this.tracker.getLastAvgY();this.tryBegin(event);this.checkBegan();}},{key:\"onPointerAdd\",value:function onPointerAdd(event){this.tracker.addToTracker(event);_get(_getPrototypeOf(PanGestureHandler.prototype),\"onPointerAdd\",this).call(this,event);this.tryBegin(event);this.offsetX+=this.lastX-this.startX;this.offsetY+=this.lastY-this.startY;this.lastX=this.tracker.getLastAvgX();this.lastY=this.tracker.getLastAvgY();this.startX=this.lastX;this.startY=this.lastY;if(this.tracker.getTrackedPointersCount()>this.maxPointers){if(this.currentState===State.ACTIVE){this.cancel();}else{this.fail();}}else{this.checkBegan();}}},{key:\"onPointerUp\",value:function onPointerUp(event){_get(_getPrototypeOf(PanGestureHandler.prototype),\"onPointerUp\",this).call(this,event);if(this.currentState===State.ACTIVE){this.lastX=this.tracker.getLastAvgX();this.lastY=this.tracker.getLastAvgY();}this.tracker.removeFromTracker(event.pointerId);if(this.currentState===State.ACTIVE){this.end();}else{this.resetProgress();this.fail();}}},{key:\"onPointerRemove\",value:function onPointerRemove(event){_get(_getPrototypeOf(PanGestureHandler.prototype),\"onPointerRemove\",this).call(this,event);this.tracker.removeFromTracker(event.pointerId);this.offsetX+=this.lastX-this.startX;this.offsetY+=this.lastY-this.startY;this.lastX=this.tracker.getLastAvgX();this.lastY=this.tracker.getLastAvgY();this.startX=this.lastX;this.startY=this.lastY;if(!(this.currentState===State.ACTIVE&&this.tracker.getTrackedPointersCount()<this.minPointers)){this.checkBegan();}}},{key:\"onPointerMove\",value:function onPointerMove(event){this.tracker.track(event);this.lastX=this.tracker.getLastAvgX();this.lastY=this.tracker.getLastAvgY();this.velocityX=this.tracker.getVelocityX(event.pointerId);this.velocityY=this.tracker.getVelocityY(event.pointerId);this.checkBegan();_get(_getPrototypeOf(PanGestureHandler.prototype),\"onPointerMove\",this).call(this,event);}},{key:\"onPointerCancel\",value:function onPointerCancel(event){_get(_getPrototypeOf(PanGestureHandler.prototype),\"onPointerCancel\",this).call(this,event);this.reset();}},{key:\"onPointerOutOfBounds\",value:function onPointerOutOfBounds(event){if(this.getShouldCancelWhenOutside()){return;}this.tracker.track(event);this.lastX=this.tracker.getLastAvgX();this.lastY=this.tracker.getLastAvgY();this.velocityX=this.tracker.getVelocityX(event.pointerId);this.velocityY=this.tracker.getVelocityY(event.pointerId);this.checkBegan();if(this.currentState===State.ACTIVE){_get(_getPrototypeOf(PanGestureHandler.prototype),\"onPointerOutOfBounds\",this).call(this,event);}}},{key:\"shouldActivate\",value:function shouldActivate(){var dx=this.getTranslationX();if(this.activeOffsetXStart!==Number.MAX_SAFE_INTEGER&&dx<this.activeOffsetXStart){return true;}if(this.activeOffsetXEnd!==Number.MIN_SAFE_INTEGER&&dx>this.activeOffsetXEnd){return true;}var dy=this.getTranslationY();if(this.activeOffsetYStart!==Number.MAX_SAFE_INTEGER&&dy<this.activeOffsetYStart){return true;}if(this.activeOffsetYEnd!==Number.MIN_SAFE_INTEGER&&dy>this.activeOffsetYEnd){return true;}var distanceSq=dx*dx+dy*dy;if(this.minDistSq!==Number.MAX_SAFE_INTEGER&&distanceSq>=this.minDistSq){return true;}var vx=this.velocityX;if(this.minVelocityX!==Number.MAX_SAFE_INTEGER&&(this.minVelocityX<0&&vx<=this.minVelocityX||this.minVelocityX>=0&&this.minVelocityX<=vx)){return true;}var vy=this.velocityY;if(this.minVelocityY!==Number.MAX_SAFE_INTEGER&&(this.minVelocityY<0&&vy<=this.minVelocityY||this.minVelocityY>=0&&this.minVelocityY<=vy)){return true;}var velocitySq=vx*vx+vy*vy;return this.minVelocitySq!==Number.MAX_SAFE_INTEGER&&velocitySq>=this.minVelocitySq;}},{key:\"shouldFail\",value:function shouldFail(){var dx=this.getTranslationX();var dy=this.getTranslationY();var distanceSq=dx*dx+dy*dy;if(this.activateAfterLongPress>0&&distanceSq>DEFAULT_MIN_DIST_SQ){this.clearActivationTimeout();return true;}if(this.failOffsetXStart!==Number.MIN_SAFE_INTEGER&&dx<this.failOffsetXStart){return true;}if(this.failOffsetXEnd!==Number.MAX_SAFE_INTEGER&&dx>this.failOffsetXEnd){return true;}if(this.failOffsetYStart!==Number.MIN_SAFE_INTEGER&&dy<this.failOffsetYStart){return true;}return this.failOffsetYEnd!==Number.MAX_SAFE_INTEGER&&dy>this.failOffsetYEnd;}},{key:\"tryBegin\",value:function tryBegin(event){var _this2=this;if(this.currentState===State.UNDETERMINED&&this.tracker.getTrackedPointersCount()>=this.minPointers){this.resetProgress();this.offsetX=0;this.offsetY=0;this.velocityX=0;this.velocityY=0;this.begin();if(this.activateAfterLongPress>0){this.activationTimeout=setTimeout(function(){_this2.activate();},this.activateAfterLongPress);}}else{this.velocityX=this.tracker.getVelocityX(event.pointerId);this.velocityY=this.tracker.getVelocityY(event.pointerId);}}},{key:\"checkBegan\",value:function checkBegan(){if(this.currentState===State.BEGAN){if(this.shouldFail()){this.fail();}else if(this.shouldActivate()){this.activate();}}}},{key:\"activate\",value:function activate(){var force=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(this.currentState!==State.ACTIVE){this.resetProgress();}_get(_getPrototypeOf(PanGestureHandler.prototype),\"activate\",this).call(this,force);}},{key:\"onCancel\",value:function onCancel(){this.clearActivationTimeout();}},{key:\"onReset\",value:function onReset(){this.clearActivationTimeout();}},{key:\"resetProgress\",value:function resetProgress(){if(this.currentState===State.ACTIVE){return;}this.startX=this.lastX;this.startY=this.lastY;}}]);return PanGestureHandler;}(GestureHandler);export{PanGestureHandler as default};","map":{"version":3,"sources":["PanGestureHandler.ts"],"names":["DEFAULT_MIN_POINTERS","DEFAULT_MAX_POINTERS","DEFAULT_MIN_DIST_SQ","DEFAULT_TOUCH_SLOP","Number","init","updateGestureConfig","enabled","props","resetConfig","transformNativeEvent","rect","ratio","PixelRatio","translationX","translationY","isNaN","absoluteX","absoluteY","velocityX","velocityY","x","y","top","getTranslationX","getTranslationY","clearActivationTimeout","clearTimeout","onPointerDown","onPointerAdd","State","onPointerUp","event","onPointerRemove","onPointerMove","onPointerCancel","onPointerOutOfBounds","shouldActivate","dx","dy","distanceSq","vx","vy","velocitySq","shouldFail","tryBegin","setTimeout","checkBegan","activate","force","onCancel","onReset","resetProgress"],"mappings":"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","sourcesContent":["import { PixelRatio } from 'react-native';\nimport { State } from '../../State';\nimport { DEFAULT_TOUCH_SLOP } from '../constants';\nimport { AdaptedEvent, Config } from '../interfaces';\n\nimport GestureHandler from './GestureHandler';\n\nconst DEFAULT_MIN_POINTERS = 1;\nconst DEFAULT_MAX_POINTERS = 10;\nconst DEFAULT_MIN_DIST_SQ = DEFAULT_TOUCH_SLOP * DEFAULT_TOUCH_SLOP;\n\nexport default class PanGestureHandler extends GestureHandler {\n  private readonly customActivationProperties: string[] = [\n    'activeOffsetXStart',\n    'activeOffsetXEnd',\n    'failOffsetXStart',\n    'failOffsetXEnd',\n    'activeOffsetYStart',\n    'activeOffsetYEnd',\n    'failOffsetYStart',\n    'failOffsetYEnd',\n    'minVelocityX',\n    'minVelocityY',\n  ];\n\n  public velocityX = 0;\n  public velocityY = 0;\n\n  private minDistSq = DEFAULT_MIN_DIST_SQ;\n\n  private activeOffsetXStart = -Number.MAX_SAFE_INTEGER;\n  private activeOffsetXEnd = Number.MIN_SAFE_INTEGER;\n  private failOffsetXStart = Number.MIN_SAFE_INTEGER;\n  private failOffsetXEnd = Number.MAX_SAFE_INTEGER;\n\n  private activeOffsetYStart = Number.MAX_SAFE_INTEGER;\n  private activeOffsetYEnd = Number.MIN_SAFE_INTEGER;\n  private failOffsetYStart = Number.MIN_SAFE_INTEGER;\n  private failOffsetYEnd = Number.MAX_SAFE_INTEGER;\n\n  private minVelocityX = Number.MAX_SAFE_INTEGER;\n  private minVelocityY = Number.MAX_SAFE_INTEGER;\n  private minVelocitySq = Number.MAX_SAFE_INTEGER;\n\n  private minPointers = DEFAULT_MIN_POINTERS;\n  private maxPointers = DEFAULT_MAX_POINTERS;\n\n  private startX = 0;\n  private startY = 0;\n  private offsetX = 0;\n  private offsetY = 0;\n  private lastX = 0;\n  private lastY = 0;\n\n  private activateAfterLongPress = 0;\n  private activationTimeout = 0;\n\n  public init(ref: number, propsRef: React.RefObject<unknown>): void {\n    super.init(ref, propsRef);\n  }\n\n  public updateGestureConfig({ enabled = true, ...props }: Config): void {\n    this.resetConfig();\n\n    super.updateGestureConfig({ enabled: enabled, ...props });\n    this.checkCustomActivationCriteria(this.customActivationProperties);\n\n    if (this.config.minDist !== undefined) {\n      this.minDistSq = this.config.minDist * this.config.minDist;\n    } else if (this.hasCustomActivationCriteria) {\n      this.minDistSq = Number.MAX_SAFE_INTEGER;\n    }\n\n    if (this.config.minPointers !== undefined) {\n      this.minPointers = this.config.minPointers;\n    }\n\n    if (this.config.maxPointers !== undefined) {\n      this.maxPointers = this.config.maxPointers;\n    }\n\n    if (this.config.minVelocity !== undefined) {\n      this.minVelocityX = this.config.minVelocity;\n      this.minVelocityY = this.config.minVelocity;\n    }\n\n    if (this.config.minVelocityX !== undefined) {\n      this.minVelocityX = this.config.minVelocityX;\n    }\n\n    if (this.config.minVelocityY !== undefined) {\n      this.minVelocityY = this.config.minVelocityY;\n    }\n\n    if (this.config.activateAfterLongPress !== undefined) {\n      this.activateAfterLongPress = this.config.activateAfterLongPress;\n    }\n\n    if (this.config.activeOffsetXStart !== undefined) {\n      this.activeOffsetXStart = this.config.activeOffsetXStart;\n\n      if (this.config.activeOffsetXEnd === undefined) {\n        this.activeOffsetXEnd = Number.MAX_SAFE_INTEGER;\n      }\n    }\n\n    if (this.config.activeOffsetXEnd !== undefined) {\n      this.activeOffsetXEnd = this.config.activeOffsetXEnd;\n\n      if (this.config.activeOffsetXStart === undefined) {\n        this.activeOffsetXStart = Number.MIN_SAFE_INTEGER;\n      }\n    }\n\n    if (this.config.failOffsetXStart !== undefined) {\n      this.failOffsetXStart = this.config.failOffsetXStart;\n\n      if (this.config.failOffsetXEnd === undefined) {\n        this.failOffsetXEnd = Number.MAX_SAFE_INTEGER;\n      }\n    }\n\n    if (this.config.failOffsetXEnd !== undefined) {\n      this.failOffsetXEnd = this.config.failOffsetXEnd;\n\n      if (this.config.failOffsetXStart === undefined) {\n        this.failOffsetXStart = Number.MIN_SAFE_INTEGER;\n      }\n    }\n\n    if (this.config.activeOffsetYStart !== undefined) {\n      this.activeOffsetYStart = this.config.activeOffsetYStart;\n\n      if (this.config.activeOffsetYEnd === undefined) {\n        this.activeOffsetYEnd = Number.MAX_SAFE_INTEGER;\n      }\n    }\n\n    if (this.config.activeOffsetYEnd !== undefined) {\n      this.activeOffsetYEnd = this.config.activeOffsetYEnd;\n\n      if (this.config.activeOffsetYStart === undefined) {\n        this.activeOffsetYStart = Number.MIN_SAFE_INTEGER;\n      }\n    }\n\n    if (this.config.failOffsetYStart !== undefined) {\n      this.failOffsetYStart = this.config.failOffsetYStart;\n\n      if (this.config.failOffsetYEnd === undefined) {\n        this.failOffsetYEnd = Number.MAX_SAFE_INTEGER;\n      }\n    }\n\n    if (this.config.failOffsetYEnd !== undefined) {\n      this.failOffsetYEnd = this.config.failOffsetYEnd;\n\n      if (this.config.failOffsetYStart === undefined) {\n        this.failOffsetYStart = Number.MIN_SAFE_INTEGER;\n      }\n    }\n  }\n\n  protected resetConfig(): void {\n    super.resetConfig();\n\n    this.activeOffsetXStart = -Number.MAX_SAFE_INTEGER;\n    this.activeOffsetXEnd = Number.MIN_SAFE_INTEGER;\n    this.failOffsetXStart = Number.MIN_SAFE_INTEGER;\n    this.failOffsetXEnd = Number.MAX_SAFE_INTEGER;\n\n    this.activeOffsetYStart = Number.MAX_SAFE_INTEGER;\n    this.activeOffsetYEnd = Number.MIN_SAFE_INTEGER;\n    this.failOffsetYStart = Number.MIN_SAFE_INTEGER;\n    this.failOffsetYEnd = Number.MAX_SAFE_INTEGER;\n\n    this.minVelocityX = Number.MAX_SAFE_INTEGER;\n    this.minVelocityY = Number.MAX_SAFE_INTEGER;\n    this.minVelocitySq = Number.MAX_SAFE_INTEGER;\n\n    this.minDistSq = DEFAULT_MIN_DIST_SQ;\n\n    this.minPointers = DEFAULT_MIN_POINTERS;\n    this.maxPointers = DEFAULT_MAX_POINTERS;\n\n    this.activateAfterLongPress = 0;\n  }\n\n  protected transformNativeEvent() {\n    const rect: DOMRect = this.view.getBoundingClientRect();\n    const ratio = PixelRatio.get();\n\n    const translationX: number = this.getTranslationX();\n    const translationY: number = this.getTranslationY();\n\n    return {\n      translationX: isNaN(translationX) ? 0 : translationX,\n      translationY: isNaN(translationY) ? 0 : translationY,\n      absoluteX: this.tracker.getLastAvgX(),\n      absoluteY: this.tracker.getLastAvgY(),\n      velocityX: this.velocityX * ratio * 10,\n      velocityY: this.velocityY * ratio * 10,\n      x: this.tracker.getLastAvgX() - rect.left,\n      y: this.tracker.getLastAvgY() - rect.top,\n    };\n  }\n\n  private getTranslationX(): number {\n    return this.lastX - this.startX + this.offsetX;\n  }\n  private getTranslationY(): number {\n    return this.lastY - this.startY + this.offsetY;\n  }\n\n  private clearActivationTimeout(): void {\n    clearTimeout(this.activationTimeout);\n  }\n\n  //EventsHandling\n  protected onPointerDown(event: AdaptedEvent): void {\n    this.tracker.addToTracker(event);\n    super.onPointerDown(event);\n\n    this.lastX = this.tracker.getLastAvgX();\n    this.lastY = this.tracker.getLastAvgY();\n\n    this.tryBegin(event);\n    this.checkBegan();\n  }\n\n  protected onPointerAdd(event: AdaptedEvent): void {\n    this.tracker.addToTracker(event);\n    super.onPointerAdd(event);\n    this.tryBegin(event);\n\n    this.offsetX += this.lastX - this.startX;\n    this.offsetY += this.lastY - this.startY;\n\n    this.lastX = this.tracker.getLastAvgX();\n    this.lastY = this.tracker.getLastAvgY();\n\n    this.startX = this.lastX;\n    this.startY = this.lastY;\n\n    if (this.tracker.getTrackedPointersCount() > this.maxPointers) {\n      if (this.currentState === State.ACTIVE) {\n        this.cancel();\n      } else {\n        this.fail();\n      }\n    } else {\n      this.checkBegan();\n    }\n  }\n\n  protected onPointerUp(event: AdaptedEvent): void {\n    super.onPointerUp(event);\n\n    if (this.currentState === State.ACTIVE) {\n      this.lastX = this.tracker.getLastAvgX();\n      this.lastY = this.tracker.getLastAvgY();\n    }\n\n    this.tracker.removeFromTracker(event.pointerId);\n\n    if (this.currentState === State.ACTIVE) {\n      this.end();\n    } else {\n      this.resetProgress();\n      this.fail();\n    }\n  }\n  protected onPointerRemove(event: AdaptedEvent): void {\n    super.onPointerRemove(event);\n    this.tracker.removeFromTracker(event.pointerId);\n\n    this.offsetX += this.lastX - this.startX;\n    this.offsetY += this.lastY - this.startY;\n\n    this.lastX = this.tracker.getLastAvgX();\n    this.lastY = this.tracker.getLastAvgY();\n\n    this.startX = this.lastX;\n    this.startY = this.lastY;\n\n    if (\n      !(\n        this.currentState === State.ACTIVE &&\n        this.tracker.getTrackedPointersCount() < this.minPointers\n      )\n    ) {\n      this.checkBegan();\n    }\n  }\n\n  protected onPointerMove(event: AdaptedEvent): void {\n    this.tracker.track(event);\n\n    this.lastX = this.tracker.getLastAvgX();\n    this.lastY = this.tracker.getLastAvgY();\n    this.velocityX = this.tracker.getVelocityX(event.pointerId);\n    this.velocityY = this.tracker.getVelocityY(event.pointerId);\n\n    this.checkBegan();\n\n    super.onPointerMove(event);\n  }\n\n  protected onPointerCancel(event: AdaptedEvent): void {\n    super.onPointerCancel(event);\n\n    this.reset();\n  }\n  protected onPointerOutOfBounds(event: AdaptedEvent): void {\n    if (this.getShouldCancelWhenOutside()) {\n      return;\n    }\n\n    this.tracker.track(event);\n\n    this.lastX = this.tracker.getLastAvgX();\n    this.lastY = this.tracker.getLastAvgY();\n    this.velocityX = this.tracker.getVelocityX(event.pointerId);\n    this.velocityY = this.tracker.getVelocityY(event.pointerId);\n\n    this.checkBegan();\n\n    if (this.currentState === State.ACTIVE) {\n      super.onPointerOutOfBounds(event);\n    }\n  }\n\n  private shouldActivate(): boolean {\n    const dx: number = this.getTranslationX();\n\n    if (\n      this.activeOffsetXStart !== Number.MAX_SAFE_INTEGER &&\n      dx < this.activeOffsetXStart\n    ) {\n      return true;\n    }\n\n    if (\n      this.activeOffsetXEnd !== Number.MIN_SAFE_INTEGER &&\n      dx > this.activeOffsetXEnd\n    ) {\n      return true;\n    }\n\n    const dy: number = this.getTranslationY();\n\n    if (\n      this.activeOffsetYStart !== Number.MAX_SAFE_INTEGER &&\n      dy < this.activeOffsetYStart\n    ) {\n      return true;\n    }\n\n    if (\n      this.activeOffsetYEnd !== Number.MIN_SAFE_INTEGER &&\n      dy > this.activeOffsetYEnd\n    ) {\n      return true;\n    }\n\n    const distanceSq: number = dx * dx + dy * dy;\n\n    if (\n      this.minDistSq !== Number.MAX_SAFE_INTEGER &&\n      distanceSq >= this.minDistSq\n    ) {\n      return true;\n    }\n\n    const vx: number = this.velocityX;\n\n    if (\n      this.minVelocityX !== Number.MAX_SAFE_INTEGER &&\n      ((this.minVelocityX < 0 && vx <= this.minVelocityX) ||\n        (this.minVelocityX >= 0 && this.minVelocityX <= vx))\n    ) {\n      return true;\n    }\n\n    const vy: number = this.velocityY;\n    if (\n      this.minVelocityY !== Number.MAX_SAFE_INTEGER &&\n      ((this.minVelocityY < 0 && vy <= this.minVelocityY) ||\n        (this.minVelocityY >= 0 && this.minVelocityY <= vy))\n    ) {\n      return true;\n    }\n\n    const velocitySq: number = vx * vx + vy * vy;\n\n    return (\n      this.minVelocitySq !== Number.MAX_SAFE_INTEGER &&\n      velocitySq >= this.minVelocitySq\n    );\n  }\n\n  private shouldFail(): boolean {\n    const dx: number = this.getTranslationX();\n    const dy: number = this.getTranslationY();\n    const distanceSq = dx * dx + dy * dy;\n\n    if (this.activateAfterLongPress > 0 && distanceSq > DEFAULT_MIN_DIST_SQ) {\n      this.clearActivationTimeout();\n      return true;\n    }\n\n    if (\n      this.failOffsetXStart !== Number.MIN_SAFE_INTEGER &&\n      dx < this.failOffsetXStart\n    ) {\n      return true;\n    }\n\n    if (\n      this.failOffsetXEnd !== Number.MAX_SAFE_INTEGER &&\n      dx > this.failOffsetXEnd\n    ) {\n      return true;\n    }\n\n    if (\n      this.failOffsetYStart !== Number.MIN_SAFE_INTEGER &&\n      dy < this.failOffsetYStart\n    ) {\n      return true;\n    }\n\n    return (\n      this.failOffsetYEnd !== Number.MAX_SAFE_INTEGER &&\n      dy > this.failOffsetYEnd\n    );\n  }\n\n  private tryBegin(event: AdaptedEvent): void {\n    if (\n      this.currentState === State.UNDETERMINED &&\n      this.tracker.getTrackedPointersCount() >= this.minPointers\n    ) {\n      this.resetProgress();\n      this.offsetX = 0;\n      this.offsetY = 0;\n      this.velocityX = 0;\n      this.velocityY = 0;\n\n      this.begin();\n\n      if (this.activateAfterLongPress > 0) {\n        this.activationTimeout = setTimeout(() => {\n          this.activate();\n        }, this.activateAfterLongPress);\n      }\n    } else {\n      this.velocityX = this.tracker.getVelocityX(event.pointerId);\n      this.velocityY = this.tracker.getVelocityY(event.pointerId);\n    }\n  }\n\n  private checkBegan(): void {\n    if (this.currentState === State.BEGAN) {\n      if (this.shouldFail()) {\n        this.fail();\n      } else if (this.shouldActivate()) {\n        this.activate();\n      }\n    }\n  }\n\n  public activate(force = false): void {\n    if (this.currentState !== State.ACTIVE) {\n      this.resetProgress();\n    }\n\n    super.activate(force);\n  }\n\n  protected onCancel(): void {\n    this.clearActivationTimeout();\n  }\n\n  protected onReset(): void {\n    this.clearActivationTimeout();\n  }\n\n  protected resetProgress(): void {\n    if (this.currentState === State.ACTIVE) {\n      return;\n    }\n\n    this.startX = this.lastX;\n    this.startY = this.lastY;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}